{"version":3,"sources":["services/persons.js","components/App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newPerson","post","id","delete","put","Header","text","Numbers","numbers","deleteClickHandler","map","number","key","Number","name","onClick","Filter","preText","value","onChangeHandler","onChange","Notification","message","success","className","PersonForm","props","onSubmit","submitHandler","nameChangeHandler","numberChangeHandler","type","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","nameFilter","setNameFilter","errorMessage","setErrorMessage","successMessage","setSuccessMessage","setError","msg","setTimeout","setSuccess","useEffect","PersonService","catch","err","event","target","preventDefault","person","find","elem","undefined","window","confirm","p","filter","concat","error","num","toLowerCase","includes","finally","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8961557e.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAllPersons = () => {\r\n    const req = axios.get(baseUrl)\r\n    return req.then(response => response.data)\r\n}\r\n\r\nconst addPerson = newPerson => {\r\n    const req = axios.post(baseUrl, newPerson)\r\n    return req.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = id => {\r\n    const req = axios.delete(`${baseUrl}/${id}`)\r\n    return req.then(response => response.data)\r\n}\r\n\r\nconst updatePerson = newPerson => {\r\n    const req = axios.put(`${baseUrl}/${newPerson.id}`, newPerson)\r\n    return req.then(response => response.data)\r\n}\r\n\r\nexport default { getAllPersons, addPerson, deletePerson, updatePerson }\r\n","import React, { useState, useEffect } from 'react'\r\nimport PersonService from '../services/persons'\r\n\r\nconst Header = ({text}) => <h2>{text}</h2>\r\n\r\nconst Numbers = ({numbers, deleteClickHandler}) => {\r\n    return (\r\n        <div>\r\n            {numbers.map(number => <Number key={number.id} number={number} deleteClickHandler={deleteClickHandler} />)}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Number = ({number, deleteClickHandler}) => {\r\n    return (\r\n        <div>\r\n            {number.name + ' '}\r\n            {number.number + ' '}\r\n            <button onClick={() => deleteClickHandler(number)}>Delete</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Filter = ({preText, value, onChangeHandler}) => {\r\n    return (\r\n        <>\r\n            {preText} <input value={value} onChange={onChangeHandler} />\r\n        </>\r\n    )\r\n}\r\n\r\nconst Notification = ({ message, success }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n    \r\n    if (success) {\r\n        return (\r\n            <div className=\"success\">\r\n                {message}\r\n            </div>\r\n        )\r\n    }\r\n    else {\r\n        return (\r\n            <div className=\"error\">\r\n              {message}\r\n            </div>\r\n        )\r\n    }\r\n  }\r\n\r\nconst PersonForm = (props) => {\r\n    return (\r\n        <form onSubmit={props.submitHandler}>\r\n            <div>\r\n                Name: <input value={props.name} onChange={props.nameChangeHandler} />\r\n            </div>\r\n            <div>\r\n                Number: <input value={props.number} onChange={props.numberChangeHandler} />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">Add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst App = () => {\r\n    const [ persons, setPersons ] = useState([])\r\n\r\n    const [ newName, setNewName ] = useState('')\r\n    const [ newNumber, setNewNumber ] = useState('')\r\n\r\n    const [ nameFilter, setNameFilter ] = useState('')\r\n\r\n    const [errorMessage, setErrorMessage] = useState(null)\r\n    const [successMessage, setSuccessMessage] = useState(null)\r\n\r\n    const addPerson = (event) => {\r\n        event.preventDefault()\r\n\r\n        const person = persons.find(elem => elem.name === newName)\r\n        if (person !== undefined) {\r\n            // Replace\r\n            if (window.confirm(`${newName} is already added to phonebook, relpace the old number with a new one?`)) {\r\n                PersonService\r\n                .updatePerson({...person, number: newNumber})\r\n                .then(response => {\r\n                    setPersons(persons.map(p => p.id !== person.id ? p : response))\r\n                    setSuccess(`Number updated for ${person.name}`)\r\n                })\r\n                .catch(err => {\r\n                    setPersons(persons.filter(p => person.id !== p.id))\r\n                    setError(`${person.name} was not found`)\r\n                })\r\n            }\r\n        }\r\n        else {\r\n            PersonService\r\n            .addPerson({name: newName, number: newNumber})\r\n            .then(response => {\r\n                setPersons(persons.concat(response))\r\n                setNewName('')\r\n                setNewNumber('')\r\n                setSuccess(`${newName} added`)\r\n            })\r\n            .catch(err => {\r\n                setError(err.response.data.error)\r\n            })\r\n        }\r\n    }\r\n\r\n    const deletePerson = person => {\r\n        if (window.confirm(`Delete ${person.name}?`)) {\r\n            // Accepted delete\r\n            PersonService\r\n            .deletePerson(person.id)\r\n            .then(response => {\r\n                setSuccess(`${person.name} deleted`)\r\n            })\r\n            .catch(err => {\r\n                setError(`${person.name} has already been deleted`)\r\n            })\r\n            .finally(() => {\r\n                // Same handling in success and fail\r\n                setPersons(persons.filter(p => person.id !== p.id))\r\n            })\r\n        }\r\n    }\r\n\r\n    const handleNameChange = (event) => setNewName(event.target.value)\r\n    const handleNumberChange = (event) => setNewNumber(event.target.value)\r\n\r\n    const handleFilterChange = (event) => {\r\n        setNameFilter(event.target.value)\r\n    }\r\n\r\n    const setError = msg => {\r\n        setErrorMessage(msg)\r\n        setTimeout(() => {\r\n            setErrorMessage(null)\r\n        }, 5000)\r\n    }\r\n\r\n    const setSuccess = msg => {\r\n        setSuccessMessage(msg)\r\n        setTimeout(() => {\r\n            setSuccessMessage(null)\r\n        }, 5000)\r\n    }\r\n\r\n    useEffect(() => {\r\n        PersonService\r\n        .getAllPersons()\r\n        .then(response => {\r\n            setPersons(response)\r\n        })\r\n        .catch(err => {\r\n            setError('Error while loading data')\r\n        })\r\n    }, [])\r\n\r\n    return (\r\n        <div>\r\n            <Notification message={errorMessage} success={false} />\r\n            <Notification message={successMessage} success={true} />\r\n\r\n            <Header text=\"Phonebook\" />\r\n\r\n            <Filter preText=\"Filter names with \" value={nameFilter} onChangeHandler={handleFilterChange} /> \r\n\r\n            <Header text=\"Add new number\" />\r\n\r\n            <PersonForm name={newName} \r\n                        number={newNumber}\r\n                        nameChangeHandler={handleNameChange}\r\n                        numberChangeHandler={handleNumberChange}\r\n                        submitHandler={addPerson} />\r\n\r\n            <Header text=\"Numbers\" />\r\n            \r\n            <Numbers numbers={persons.filter(num => num.name.toLowerCase().includes(nameFilter.toLowerCase()))} \r\n                     deleteClickHandler={deletePerson} />\r\n\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}